{"version":3,"sources":["redux/actions/search.js","redux/actions/schedule.js","panels/schedule/SearchPanel/index.jsx","panels/schedule/TabsSchedule/index.jsx","helpers/typeToColor.js","panels/schedule/DayCard/Lesson.jsx","panels/schedule/DayCard/index.jsx","helpers/selectDay.js","redux/actions/user.js","helpers/currentWeek.js","panels/schedule/SchedulePanel/index.jsx","helpers/currentDay.js","helpers/selectDayWithDiff.js","panels/profile/ProfilePanel/index.jsx","helpers/toEnd.js","redux/actions/panels.js","App.js","redux/reducers/search.js","redux/reducers/panels.js","redux/reducers/schedule.js","redux/reducers/user.js","redux/reducers/rootReducer.js","API_RESOLVER.js","redux/sagas/search.js","redux/sagas/schedule.js","redux/sagas/user.js","redux/store.js","index.js"],"names":["searchScheduleRequest","q","type","payload","searchScheduleSuccess","data","scheduleRequest","id","scheduleSuccess","connect","search","loading","error","d","bindActionCreators","onChangeActivePanel","useState","value","setValue","Loading","className","size","Error","action","mode","onClick","e","stretched","vertical","placeholder","onChange","currentTarget","after","length","style","marginTop","map","href","title","key","slice","TabsSchedule","week","onChangeWeek","day","onChangeDay","selected","typeToColor","Lesson","time","auditory","subject","fromWhom","borderLeft","t","i","DayCard","lesson","l","createLesson","selectDay","days","filter","userRequest","userSuccess","userGroupAddRequest","uid","group","userGroupAddSuccess","userGroupDelRequest","userGroupDelSuccess","currentWeek","date","Date","getTime","year","Math","floor","schedule","scheduleId","user","loadingUser","setWeek","getDay","currentDay","setDay","diff","setDiff","history","setHistory","useEffect","console","log","btns","h","goBack","styles","div","display","justifyContent","card","fontSize","alignItems","padding","a","b","r","my","reduce","res","your","eq","selectDayWithDiff","left","cur","fromWhoms","onChangeActiveStory","end","ceil","abs","toEnd","header","width","changeActiveStory","story","changeActivePanel","activeStory","activePanel","s","panels","activePanels","userId","changeStory","tabbar","dataset","data-story","text","popout","profile","initialState","combineReducers","state","API_RESOLVER","searchWatcher","searchWorker","debounce","call","requestSchedule","put","fetch","then","json","scheduleWatcher","scheduleWorker","takeEvery","userWatcher","userWorker","userGroupAddWatcher","userGroupAddWorker","userGroupDelWatcher","userGroupDelWorker","requestUser","registerUser","method","headers","userGroupAdd","opts","body","JSON","stringify","userGroupDel","sagaMiddleware","createSagaMiddleware","store","createStore","rootReducer","composeWithDevTools","applyMiddleware","run","bridge","send","app","root","document","getElementById","ReactDOM","render"],"mappings":"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","file":"static/js/main.94a40239.chunk.js","sourcesContent":["export const SEARCH_SCHEDULE_REQUEST = 'SEARCH_SCHEDULE_REQUEST'\r\nexport const searchScheduleRequest = q => ({ type : SEARCH_SCHEDULE_REQUEST, payload : q })\r\n\r\nexport const SEARCH_SCHEDULE_SUCCESS = 'SEARCH_SCHEDULE_SUCCESS'\r\nexport const searchScheduleSuccess = data => ({ type : SEARCH_SCHEDULE_SUCCESS, payload : data })\r\n\r\nexport const SEARCH_SCHEDULE_ERROR = 'SEARCH_SCHEDULE_ERROR'\r\nexport const searchScheduleError = () => ({ type : SEARCH_SCHEDULE_ERROR })","export const SCHEDULE_REQUEST = 'SCHEDULE_REQUEST'\r\nexport const scheduleRequest = id => ({ type : SCHEDULE_REQUEST, payload : id })\r\n\r\nexport const SCHEDULE_SUCCESS = 'SCHEDULE_SUCCESS'\r\nexport const scheduleSuccess = data => ({ type : SCHEDULE_SUCCESS, payload : data })\r\n\r\nexport const SCHEDULE_ERROR = 'SCHEDULE_ERROR'\r\nexport const scheduleError = () => ({ type : SCHEDULE_ERROR })","import React, { useState } from 'react'\r\nimport './SearchPanel.sass'\r\n\r\nimport { FixedLayout, Search, Panel, PanelHeader, Spinner, Placeholder, Button, Div, PanelSpinner, List, CellButton } from '@vkontakte/vkui'\r\nimport { bindActionCreators } from 'redux'\r\nimport { connect } from 'react-redux'\r\n\r\nimport { searchScheduleRequest } from '../../../redux/actions/search'\r\nimport { scheduleRequest } from '../../../redux/actions/schedule'\r\n\r\nconst SearchPanel = ({\r\n  id,\r\n  onChangeActivePanel,\r\n  searchScheduleRequest,\r\n  scheduleRequest,\r\n  data, loading, error, q\r\n}) => {\r\n  const [value, setValue] = useState(q)\r\n\r\n  const changeValue = e => {\r\n    setValue(e.currentTarget.value)\r\n    searchScheduleRequest(e.currentTarget.value)\r\n  }\r\n\r\n  const Loading = <div className=\"center\"><PanelSpinner size=\"large\"/></div>\r\n  const Error = (\r\n    <Placeholder\r\n      action={<Button mode=\"tertiary\" onClick={ e => searchScheduleRequest(value) }>Попробовать еще</Button>}\r\n      stretched\r\n    >Произошла ошибка</Placeholder>\r\n  )\r\n\r\n  return (\r\n    <Panel id={id}>\r\n      <PanelHeader>Поиск</PanelHeader>\r\n      <FixedLayout vertical=\"top\">\r\n        <Search\r\n          placeholder=\"Группа или преподаватель\"\r\n          value={value}\r\n          onChange={changeValue}\r\n          after={null}\r\n        />\r\n      </FixedLayout>\r\n      {\r\n        loading\r\n          ? Loading\r\n          : error\r\n            ? Error\r\n            : data.length === 0\r\n              ? <Placeholder stretched>Ничего не найдено</Placeholder>\r\n              : (\r\n                <List style={{ marginTop : '56px' }}>\r\n                {\r\n                  data.map( ({ href, title }) => {\r\n                    return <CellButton\r\n                      key={href}\r\n                      onClick={ e => {\r\n                        scheduleRequest(href.slice(1))\r\n                        onChangeActivePanel('schedule', 'schedule')                        \r\n                      } }\r\n                    >{title}</CellButton>\r\n                  } )\r\n                }\r\n                </List>\r\n              )\r\n      }\r\n    </Panel>\r\n  )\r\n}\r\n\r\nconst mstp = ({ search : { loading, error, data, q } }) => ({ loading, error, data, q })\r\nconst mdtp = d => bindActionCreators({ searchScheduleRequest, scheduleRequest }, d)\r\n\r\nexport default connect(mstp, mdtp)(SearchPanel)","import React from 'react'\r\n\r\nimport { TabsItem, Tabs } from '@vkontakte/vkui'\r\n\r\nconst TabsSchedule = ({ week, onChangeWeek, day, onChangeDay }) => {\r\n  return(\r\n    <>\r\n      <Tabs mode=\"default\">\r\n        <TabsItem onClick={() => onChangeWeek(0)} selected={week === 0}>Знаменатель</TabsItem>\r\n        <TabsItem onClick={() => onChangeWeek(1)} selected={week === 1}>Числитель</TabsItem>\r\n      </Tabs>\r\n      <Tabs mode=\"default\">\r\n        <TabsItem onClick={() => onChangeDay(0)} selected={day === 0}>ПН</TabsItem>\r\n        <TabsItem onClick={() => onChangeDay(1)} selected={day === 1}>ВТ</TabsItem>\r\n        <TabsItem onClick={() => onChangeDay(2)} selected={day === 2}>СР</TabsItem>\r\n        <TabsItem onClick={() => onChangeDay(3)} selected={day === 3}>ЧТ</TabsItem>\r\n        <TabsItem onClick={() => onChangeDay(4)} selected={day === 4}>ПТ</TabsItem>\r\n        <TabsItem onClick={() => onChangeDay(5)} selected={day === 5}>СБ</TabsItem>\r\n      </Tabs>\r\n    </>\r\n  )\r\n}\r\n\r\nexport default TabsSchedule","export const typeToColor = type => (['red', 'orange', 'green'][type])","import React from 'react'\r\n\r\nimport { typeToColor } from '../../../helpers/typeToColor'\r\n\r\nconst Lesson = ({\r\n  type, time, auditory, subject, fromWhom,\r\n  scheduleRequest\r\n}) => {\r\n  const style = { borderLeft : `5px solid ${typeToColor(type)}` }\r\n\r\n  return(\r\n    <div className=\"lesson\">\r\n      <div className=\"lesson__time\">\r\n        {time.map((t,i) => <div key={i} className=\"time__item\">{t}</div>)}\r\n      </div>\r\n\r\n      <div className=\"lesson__info\" style={style}>\r\n        <div className=\"info__auditory\">{auditory}</div>\r\n        <div className=\"info__subject\">{subject}</div>\r\n        <div className=\"info__fromWhoms\">\r\n          {\r\n            fromWhom.map( ({href, title}) => {\r\n              return (\r\n                <div\r\n                  key={href}\r\n                  className=\"fromWhoms__item\"\r\n                  onClick={() => scheduleRequest(href.slice(1))}\r\n                >{title}</div>\r\n              )}\r\n            )\r\n          }\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Lesson","import React from 'react'\r\nimport './DayCard.sass'\r\n\r\nimport { Div, Card } from '@vkontakte/vkui'\r\nimport Lesson from './Lesson'\r\n\r\nconst DayCard = ({ day, scheduleRequest }) => {\r\n  const createLesson = (l, i) => <Lesson key={i} {...l} scheduleRequest={scheduleRequest}/>\r\n\r\n  return (\r\n    <Div>\r\n      <Card size=\"l\">\r\n        <Div>\r\n          {\r\n            !day || day.length === 0\r\n              ? <div className=\"empty\">Пусто :)</div>\r\n              : day.map((lesson, i) => createLesson(lesson, i))\r\n          }          \r\n        </Div>\r\n      </Card>\r\n    </Div>\r\n  )\r\n}\r\n\r\nexport default DayCard","export const selectDay = (days = [], day, week) => days[day]?.filter( l => l.week === week || l.week === 2)","export const USER_REQUEST = 'USER_REQUEST'\r\nexport const userRequest = id => ({ type : USER_REQUEST, payload : id })\r\n\r\nexport const USER_SUCCESS = 'USER_SUCCESS'\r\nexport const userSuccess = data => ({ type : USER_SUCCESS, payload : data })\r\n\r\nexport const USER_ERROR = 'USER_ERROR'\r\nexport const userError = () => ({ type : USER_ERROR })\r\n\r\n\r\nexport const USER_GROUP_ADD = 'USER_GROUP_ADD'\r\nexport const userGroupAddRequest = (uid, group) => ({ type : USER_GROUP_ADD, payload : {uid, group} })\r\n\r\nexport const USER_GROUP_ADD_SUCCESS = 'USER_GROUP_ADD_SUCCESS'\r\nexport const userGroupAddSuccess = data => ({ type : USER_GROUP_ADD_SUCCESS, payload : data })\r\n\r\nexport const USER_GROUP_ADD_ERROR = 'USER_GROUP_ADD_ERROR'\r\nexport const userGroupAddError = () => ({ type : USER_GROUP_ADD_ERROR })\r\n\r\n\r\nexport const USER_GROUP_DEL = 'USER_GROUP_DEL'\r\nexport const userGroupDelRequest = id => ({ type : USER_GROUP_DEL, payload : id })\r\n\r\nexport const USER_GROUP_DEL_SUCCESS = 'USER_GROUP_DEL_SUCCESS'\r\nexport const userGroupDelSuccess = data => ({ type : USER_GROUP_DEL_SUCCESS, payload : data })\r\n\r\nexport const USER_GROUP_DEL_ERROR = 'USER_GROUP_DEL_ERROR'\r\nexport const userGroupDelError = () => ({ type : USER_GROUP_DEL_ERROR })","export const currentWeek = () => {\r\n  const date = new Date().getTime()\r\n  const year = new Date('01.01.2020').getTime()\r\n\r\n  const diff = Math.floor((date - year) / 604800000)\r\n  return diff % 2\r\n}","import React, { useState, useEffect } from 'react'\r\nimport './SchedulePanel.sass'\r\n\r\nimport { Panel, PanelHeader, Placeholder, PanelSpinner, Button, Div, Link, PanelHeaderBack, PanelHeaderClose, PanelHeaderButton, Card, Alert } from '@vkontakte/vkui'\r\nimport Icon24BrowserBack from \"@vkontakte/icons/dist/24/browser_back\"\r\nimport Icon24Favorite from \"@vkontakte/icons/dist/24/favorite\"\r\nimport Icon24FavoriteOutline from \"@vkontakte/icons/dist/24/favorite_outline\"\r\nimport Icon24Hide from \"@vkontakte/icons/dist/24/hide\"\r\nimport Icon24View from \"@vkontakte/icons/dist/24/view\"\r\n\r\nimport { connect } from 'react-redux'\r\nimport { bindActionCreators } from 'redux'\r\n\r\nimport TabsSchedule from '../TabsSchedule'\r\nimport DayCard from '../DayCard'\r\nimport { scheduleRequest } from '../../../redux/actions/schedule'\r\nimport { selectDay } from '../../../helpers/selectDay'\r\nimport { selectDayWithDiff } from '../../../helpers/selectDayWithDiff'\r\nimport { userGroupAddRequest, userGroupDelRequest } from '../../../redux/actions/user'\r\nimport { currentWeek } from \"../../../helpers/currentWeek\"\r\nimport { currentDay } from \"../../../helpers/currentDay\"\r\n\r\nconst SchedulePanel = ({\r\n  id,\r\n  scheduleId, scheduleRequest,\r\n  onChangeActivePanel,\r\n  data, loading, error,\r\n  uid, group, schedule,\r\n  userGroupAddRequest, userGroupDelRequest\r\n}) => {\r\n  const [week, setWeek] = useState(currentWeek())\r\n  const [day, setDay] = useState(currentDay())\r\n  const [diff, setDiff] = useState(false)\r\n\r\n  const [history, setHistory] = useState([])\r\n\r\n  useEffect(() => {\r\n    setHistory([...history, scheduleId])\r\n    console.log('render')\r\n  }, [])\r\n\r\n  const goForward = href => {\r\n    setHistory( cur => ([...cur, href]) )\r\n    scheduleRequest(href)\r\n  }\r\n\r\n  const goBack = () => {\r\n    const h = history.slice(0, history.length - 1)\r\n    const href = h[h.length - 1]\r\n    setHistory(h)\r\n    \r\n    if(h.length === 0)\r\n      onChangeActivePanel('schedule', 'search')\r\n    else\r\n      scheduleRequest(href)\r\n  }\r\n\r\n  const Loading =<PanelSpinner size=\"large\"/>\r\n  const Error = (\r\n    <Placeholder\r\n      action={<Button mode=\"tertiary\" onClick={ e => scheduleRequest(scheduleId.slice(1)) }>Попробовать еще</Button>}\r\n      stretched\r\n    >Произошла ошибка</Placeholder>\r\n  )\r\n  const btns = (\r\n    <div className=\"panel-header\">\r\n      <Icon24BrowserBack onClick={e => goBack(scheduleId)}/>\r\n      {\r\n        group && group.slice(1) === scheduleId\r\n          ? <Icon24Favorite onClick={() => userGroupDelRequest(uid)} />\r\n          : <Icon24FavoriteOutline onClick={() => userGroupAddRequest(uid, scheduleId)}/>\r\n      }      \r\n      {\r\n        diff\r\n          ? <Icon24Hide onClick={e => setDiff(!diff)} />\r\n          : <Icon24View onClick={e => setDiff(!diff)} />\r\n      }\r\n    </div>\r\n  )\r\n\r\n  const styles = {\r\n    div : { display : \"flex\", justifyContent : 'center' },\r\n    card :  {\r\n      fontSize : '14px',\r\n      display : \"flex\",\r\n      justifyContent : 'center',\r\n      alignItems : 'center',\r\n      padding : '8px'\r\n    }\r\n  }\r\n\r\n  const d = !data\r\n    ? []\r\n    : !schedule\r\n      ? selectDay(data.days, day, week)\r\n      : diff\r\n        ? selectDayWithDiff(data.days, schedule.days, day, week)\r\n        : selectDay(data.days, day, week)\r\n\r\n  return (\r\n    <Panel id={id}>\r\n      <PanelHeader left={btns}>Расписание</PanelHeader>\r\n      <Div>\r\n        <Card\r\n          style={styles.card}>\r\n          {data && data.title}\r\n        </Card>\r\n      </Div>\r\n        \r\n      <TabsSchedule\r\n        week={week}\r\n        onChangeWeek={setWeek}\r\n        day={day}\r\n        onChangeDay={setDay}\r\n      />\r\n      {\r\n        loading\r\n          ? Loading\r\n          : error\r\n            ? Error\r\n            : <>\r\n              <DayCard\r\n                day={d}\r\n                scheduleRequest={goForward}\r\n              />\r\n              <Div style={styles.div}>\r\n                <Link href={`http://www.bstu.ru/static/themes/bstu/schedule/index.php?${scheduleId}`}>\r\n                  Посмотреть расписание на сайте\r\n                </Link>\r\n              </Div>\r\n            </>\r\n      }      \r\n    </Panel>\r\n  )\r\n}\r\n\r\nconst mstp = ({\r\n  schedule : { data, loading, error, id : scheduleId },\r\n  user : { id : uid, group, schedule, loading : loadingUser }\r\n}) => ({\r\n  data, loading, error, scheduleId,\r\n  uid, group, schedule, loadingUser\r\n})\r\n \r\nconst mdtp = d => bindActionCreators({ scheduleRequest, userGroupAddRequest, userGroupDelRequest }, d)\r\n\r\nexport default connect(mstp, mdtp)(SchedulePanel)","export const currentDay = () => {\r\n  const id = new Date().getDay()\r\n\r\n  return id === 7 ? 0 : id - 1\r\n}","const eq = (a,b) => a[0] === b[0] && a[1] === b[1]\r\n\r\nexport const selectDayWithDiff = (a, b, day, week) => {\r\n  // l[{0},{1},{2}] - r[{1},{3}] = [{0},{2}]\r\n  const l = a[day].filter( l => l.week === week || l.week === 2 )\r\n  const r = b[day].filter( l => l.week === week || l.week === 2 )\r\n  \r\n  return l.filter( my => r.reduce( (res, your) => res && !eq(my.time, your.time), true ) )\r\n}","import React from 'react'\r\n\r\nimport { Panel, PanelHeader, Card, Div, CellButton, Group, Header, Placeholder, Button, PanelSpinner } from '@vkontakte/vkui'\r\n\r\nimport { connect } from 'react-redux'\r\nimport { bindActionCreators } from 'redux'\r\n\r\nimport { currentWeek } from '../../../helpers/currentWeek'\r\nimport { toEnd } from '../../../helpers/toEnd'\r\nimport { scheduleRequest } from \"../../../redux/actions/schedule\"\r\nimport { userRequest, userGroupDelRequest } from \"../../../redux/actions/user\"\r\n\r\nconst ProfilePanel = ({\r\n  id,\r\n  group, schedule, fromWhoms, loading, error,\r\n  uid, userRequest,\r\n  onChangeActivePanel, onChangeActiveStory,\r\n  scheduleRequest,\r\n  userGroupDelRequest\r\n}) => {\r\n\r\n  const Loading =<PanelSpinner size=\"large\"/>\r\n  const Error = (\r\n    <Placeholder\r\n      action={<Button mode=\"tertiary\" onClick={ e => userRequest(uid) }>Попробовать еще</Button>}\r\n    >Произошла ошибка</Placeholder>\r\n  )\r\n\r\n  return (\r\n    <Panel id={id}>\r\n      <PanelHeader>Профиль</PanelHeader>\r\n      <Div>\r\n        <Card>\r\n          <Div>\r\n            <div style={{padding : '5px'}}>\r\n              <b>Текущая неделя : </b> {['знаменатель','числитель'][currentWeek()]}\r\n            </div>\r\n            <div style={{padding : '5px'}}>\r\n              <b>До конца семестра : </b> {toEnd()} дн.\r\n            </div>\r\n          </Div>\r\n        </Card>        \r\n      </Div>\r\n      {\r\n        loading\r\n          ? Loading\r\n          : error\r\n            ? Error\r\n            : !group\r\n                ? <Placeholder\r\n                    action={<Button mode=\"tertiary\" onClick={ e => {\r\n                      onChangeActiveStory('schedule')\r\n                      onChangeActivePanel('schedule', 'search')\r\n                    } }>Выбрать</Button>}\r\n                  >Группа не выбранна</Placeholder>\r\n                : (\r\n                  <>\r\n                    <Group header={<Header mode=\"secondary\">Ваше расписание</Header>}>\r\n                      <CellButton\r\n                        onClick={ e => {\r\n                          scheduleRequest(group.slice(1))\r\n                          onChangeActiveStory('schedule')\r\n                          onChangeActivePanel('schedule', 'schedule')\r\n                        } }\r\n                      >{schedule.title}</CellButton>\r\n                      <Div>\r\n                        <Button\r\n                          mode=\"destructive\"\r\n                          size=\"l\"\r\n                          style={{width : '100%'}}\r\n                          onClick={ e => userGroupDelRequest(uid) }\r\n                        >Удалить расписание</Button>\r\n                      </Div>\r\n                    </Group>\r\n                    <Group header={\r\n                      <Header mode=\"secondary\">\r\n                        Ваши {group[1] === 't' ? 'группы' : 'преподователи'}\r\n                      </Header>\r\n                    }>\r\n                    {\r\n                      fromWhoms.map( ({ href, title }) => {\r\n                        return <CellButton\r\n                          key={href}\r\n                          onClick={ e => {\r\n                            scheduleRequest(href.slice(1))\r\n                            onChangeActiveStory('schedule')\r\n                            onChangeActivePanel('schedule', 'schedule')\r\n                          } }\r\n                        >{title}</CellButton>\r\n                      } )\r\n                    }\r\n                    </Group>\r\n                  </>\r\n                )\r\n      }\r\n    </Panel>\r\n  )\r\n}\r\n\r\nconst mstp = ({\r\n  user : { group, schedule, fromWhoms, loading, error, id : uid }\r\n}) => ({\r\n  group, schedule, fromWhoms, loading, error, uid\r\n})\r\nconst mdtp = d => bindActionCreators({ scheduleRequest, userRequest, userGroupDelRequest }, d)\r\n\r\nexport default connect(mstp, mdtp)(ProfilePanel)","export const toEnd = () => {\r\n  const cur = new Date().getTime()\r\n  const end = new Date('12.27.2020').getTime()\r\n  \r\n  return Math.ceil(Math.abs(end - cur) / (1000 * 3600 * 24))\r\n}","export const CHANGE_ACTIVE_STORY = 'CHANGE_ACTIVE_STORY'\r\nexport const changeActiveStory = story => ({ type : CHANGE_ACTIVE_STORY, payload : story })\r\n\r\nexport const CHANGE_ACTIVE_PANEL = 'CHANGE_ACTIVE_PANEL'\r\nexport const changeActivePanel = (activeStory, activePanel) => ({\r\n  type : CHANGE_ACTIVE_PANEL,\r\n  payload :  { activeStory, activePanel }\r\n})","import React, { useEffect, useState } from 'react'\nimport '@vkontakte/vkui/dist/vkui.css'\n\nimport { Epic, Tabbar, TabbarItem, View, Panel, PanelHeader, ScreenSpinner } from '@vkontakte/vkui'\nimport Icon28CalendarOutline from \"@vkontakte/icons/dist/28/calendar_outline\"\nimport Icon28UserCircleOutline from \"@vkontakte/icons/dist/28/user_circle_outline\"\nimport Icon28GridSquareOutline from \"@vkontakte/icons/dist/28/grid_square_outline\"\n\nimport SearchPanel from './panels/schedule/SearchPanel'\nimport SchedulePanel from './panels/schedule/SchedulePanel'\nimport ProfilePanel from './panels/profile/ProfilePanel'\n\nimport { connect } from 'react-redux'\nimport { bindActionCreators } from 'redux'\nimport { changeActiveStory, changeActivePanel } from './redux/actions/panels'\nimport { userRequest } from './redux/actions/user'\n\nconst App = ({\n\tactivePanels,\n\tactiveStory,\n\tchangeActivePanel,\n\tchangeActiveStory,\n\tuserId, userRequest,\n\tloading\n}) => {\n\tconst [popout, setPopout] = useState(null)\n\n\tuseEffect(() => {\n\t\tuserRequest(userId)\n\t} , [])\n\n\tconst changeStory = story => changeActiveStory(story)\n\n\tconst tabbar = (\n    <Tabbar>\n      <TabbarItem\n        onClick={e => changeStory(e.currentTarget.dataset.story)}\n        selected={activeStory === \"schedule\"}\n        data-story=\"schedule\"\n        text=\"Расписание\"\n      ><Icon28GridSquareOutline/></TabbarItem>\n      <TabbarItem\n        onClick={e => changeStory(e.currentTarget.dataset.story)}\n        selected={activeStory === \"profile\"}\n        data-story=\"profile\"\n        text=\"Профиль\"\n      ><Icon28UserCircleOutline/></TabbarItem>\n    </Tabbar>\n  )\n\n\treturn(\n\t\t<Epic\n\t\t\tactiveStory={activeStory}\n\t\t\ttabbar={tabbar}\n\t\t>\n\t\t\t<View\n\t\t\t\tid=\"schedule\"\n\t\t\t\tactivePanel={activePanels.schedule}\n\t\t\t\tpopout={loading ? <ScreenSpinner /> : null}\n\t\t\t>\n\t\t\t\t<SearchPanel\n\t\t\t\t\tid=\"search\"\n\t\t\t\t\tonChangeActivePanel={changeActivePanel}\n\t\t\t\t/>\n\t\t\t\t<SchedulePanel\n\t\t\t\t\tid=\"schedule\"\n\t\t\t\t\tonChangeActivePanel={changeActivePanel}\n\t\t\t\t/>\n\t\t\t</View>\n\n\t\t\t<View id=\"profile\" activePanel={activePanels.profile}>\n\t\t\t\t<ProfilePanel\n\t\t\t\t\tid=\"profile\"\n\t\t\t\t\tonChangeActivePanel={changeActivePanel}\n\t\t\t\t\tonChangeActiveStory={changeStory}\n\t\t\t\t/>\n\t\t\t</View>\n\t\t</Epic>\n\t)\n}\n\nconst mstp = s => ({\n\tactiveStory : s.panels.activeStory,\n\tactivePanels : s.panels.activePanels,\n\tuserId : s.user.id,\n\tloading : s.user.loading\n})\nconst mdtp = d => bindActionCreators({\n\tchangeActiveStory,\n\tchangeActivePanel,\n\tuserRequest\n}, d)\n\nexport default connect(mstp, mdtp)(App)","import { SEARCH_SCHEDULE_SUCCESS, SEARCH_SCHEDULE_REQUEST, SEARCH_SCHEDULE_ERROR } from \"../actions/search\"\r\n\r\nconst initialState = {\r\n  q : '',\r\n  loading : false,\r\n  error : false,\r\n  data : []\r\n}\r\n\r\nexport const search = ( state = initialState, action ) => {\r\n  switch (action.type)\r\n  {\r\n    case SEARCH_SCHEDULE_REQUEST:\r\n      return {\r\n        ...state,\r\n        loading : true,\r\n        error : false,\r\n        q : action.payload\r\n      } \r\n      \r\n    case SEARCH_SCHEDULE_SUCCESS:\r\n      return {\r\n        ...state,\r\n        loading : false,\r\n        error : false,\r\n        data : action.payload\r\n      } \r\n\r\n    case SEARCH_SCHEDULE_ERROR:\r\n      return {\r\n        ...state,\r\n        loading : false,\r\n        error : true\r\n      } \r\n\r\n    default: return state\r\n  }\r\n}","import { CHANGE_ACTIVE_STORY, CHANGE_ACTIVE_PANEL } from \"../actions/panels\"\r\n\r\nconst initialState = {\r\n  activeStory : 'profile',\r\n  activePanels : {\r\n    schedule : 'search',\r\n    profile : 'profile'\r\n  }\r\n}\r\n\r\nexport const panels = (state = initialState, action) => {\r\n  switch(action.type)\r\n  {\r\n    case CHANGE_ACTIVE_STORY:\r\n      return {\r\n        ...state,\r\n        activeStory : action.payload\r\n      }\r\n    \r\n    case CHANGE_ACTIVE_PANEL:\r\n      return {\r\n        ...state,\r\n        activePanels : {\r\n          ...state.activePanels,\r\n          [action.payload.activeStory] : action.payload.activePanel\r\n        }\r\n      }\r\n\r\n    default : return state\r\n  }\r\n}","import { SCHEDULE_ERROR, SCHEDULE_REQUEST, SCHEDULE_SUCCESS } from \"../actions/schedule\"\r\n\r\nconst initialState = {\r\n  id : '',\r\n  loading : false,\r\n  error : false,\r\n  data : null\r\n}\r\n\r\nexport const schedule = ( state = initialState, action ) => {\r\n  switch (action.type)\r\n  {\r\n    case SCHEDULE_REQUEST:\r\n      return {\r\n        ...state,\r\n        loading : true,\r\n        error : false,\r\n        id : action.payload,\r\n        data : null\r\n      } \r\n      \r\n    case SCHEDULE_SUCCESS:\r\n      return {\r\n        ...state,\r\n        loading : false,\r\n        error : false,\r\n        data : action.payload\r\n      } \r\n\r\n    case SCHEDULE_ERROR:\r\n      return {\r\n        ...state,\r\n        loading : false,\r\n        error : true\r\n      } \r\n\r\n    default: return state\r\n  }\r\n}","import {\r\n  USER_ERROR, USER_REQUEST, USER_SUCCESS,\r\n  USER_GROUP_ADD, USER_GROUP_ADD_SUCCESS, USER_GROUP_ADD_ERROR,\r\n  USER_GROUP_DEL, USER_GROUP_DEL_SUCCESS, USER_GROUP_DEL_ERROR\r\n} from \"../actions/user\"\r\n\r\nconst initialState = {\r\n  id : 17,\r\n  loading : false,\r\n  error : false,\r\n  group : null,\r\n  fromWhoms : [],\r\n  schedule : null\r\n}\r\n\r\nexport const user = ( state = initialState, action ) => {\r\n  switch (action.type)\r\n  {\r\n    case USER_REQUEST:\r\n      return {\r\n        ...state,\r\n        loading : true,\r\n        error : false,\r\n        id : action.payload\r\n      }\r\n      \r\n    case USER_SUCCESS:\r\n      return {\r\n        ...state,\r\n        loading : false,\r\n        error : false,\r\n        group : action.payload.group,\r\n        fromWhoms : action.payload.fromWhoms,\r\n        schedule : action.payload.schedule\r\n      } \r\n\r\n    case USER_ERROR:\r\n      return {\r\n        ...state,\r\n        loading : false,\r\n        error : true\r\n      }\r\n\r\n    case USER_GROUP_ADD:\r\n      return {\r\n        ...state,\r\n        loading : true,\r\n        error : false,\r\n        group : action.payload.group\r\n      }\r\n      \r\n    case USER_GROUP_ADD_SUCCESS:\r\n      return {\r\n        ...state,\r\n        loading : false,\r\n        error : false,\r\n        group : action.payload.group,\r\n        fromWhoms : action.payload.fromWhoms,\r\n        schedule : action.payload.schedule\r\n      } \r\n\r\n    case USER_GROUP_ADD_ERROR:\r\n      return {\r\n        ...state,\r\n        loading : false,\r\n        error : true,\r\n        group : null\r\n      }\r\n\r\n    case USER_GROUP_DEL:\r\n      return {\r\n        ...state,\r\n        loading : true,\r\n        error : false\r\n      }\r\n      \r\n    case USER_GROUP_DEL_SUCCESS:\r\n      return {\r\n        ...state,\r\n        loading : false,\r\n        error : false,\r\n        group : null,\r\n        fromWhoms : [],\r\n        schedule : null        \r\n      } \r\n\r\n    case USER_GROUP_DEL_ERROR:\r\n      return {\r\n        ...state,\r\n        loading : false,\r\n        error : true\r\n      }\r\n\r\n    default: return state\r\n  }\r\n}","import { combineReducers } from \"redux\"\r\n\r\nimport { search } from \"./search\"\r\nimport { panels } from \"./panels\"\r\nimport { schedule } from \"./schedule\"\r\nimport { user } from \"./user\"\r\n\r\nexport default combineReducers({ search, panels, schedule, user })","// const BASE_URL = 'http://localhost:5000'\r\nconst BASE_URL = ''\r\n\r\nexport const API_RESOLVER = {\r\n  search(q){ return `${BASE_URL}/group_or_teacher?q=${q}` },\r\n  schedule(id){ return `${BASE_URL}/schedule/${id}` },\r\n  userReq(id){ return `${BASE_URL}/user?id=${id}` },\r\n  userGroupToggle(){ return `${BASE_URL}/user/group` }\r\n}","import { debounce, put, call } from 'redux-saga/effects'\r\n\r\nimport { SEARCH_SCHEDULE_REQUEST, searchScheduleSuccess, searchScheduleError } from \"../actions/search\"\r\nimport { API_RESOLVER } from '../../API_RESOLVER'\r\n\r\nexport function* searchWatcher()\r\n{\r\n  yield debounce(500, SEARCH_SCHEDULE_REQUEST, searchWorker)\r\n}\r\n\r\nfunction* searchWorker({ payload : q })\r\n{\r\n  try\r\n  {\r\n    const data = yield call(requestSchedule, q)\r\n    yield put(searchScheduleSuccess(data))\r\n  }\r\n  catch(err)\r\n  {\r\n    yield put(searchScheduleError())\r\n  }\r\n}\r\n\r\nfunction requestSchedule(q)\r\n{\r\n  return fetch(API_RESOLVER.search(q)).then( res => res.json() )\r\n}","import { takeEvery, put, call } from 'redux-saga/effects'\r\n\r\nimport { SCHEDULE_REQUEST, scheduleSuccess, scheduleError } from \"../actions/schedule\"\r\nimport { API_RESOLVER } from '../../API_RESOLVER'\r\n\r\nexport function* scheduleWatcher()\r\n{\r\n  yield takeEvery(SCHEDULE_REQUEST, scheduleWorker)\r\n}\r\n\r\nfunction* scheduleWorker({ payload : id })\r\n{\r\n  try\r\n  {\r\n    const data = yield call(requestSchedule, id)\r\n    yield put(scheduleSuccess(data))\r\n  }\r\n  catch(err)\r\n  {\r\n    yield put(scheduleError())\r\n  }\r\n}\r\n\r\nfunction requestSchedule(id)\r\n{\r\n  return fetch(API_RESOLVER.schedule(id)).then( res => res.json() )\r\n}","import { takeEvery, put, call } from 'redux-saga/effects'\r\n\r\nimport {\r\n  USER_REQUEST, userSuccess, userError,\r\n  USER_GROUP_ADD, userGroupAddSuccess, userGroupAddError,\r\n  USER_GROUP_DEL, userGroupDelSuccess, userGroupDelError,\r\n} from \"../actions/user\"\r\nimport { API_RESOLVER } from '../../API_RESOLVER'\r\n\r\nexport function* userWatcher()\r\n{\r\n  yield takeEvery(USER_REQUEST, userWorker)\r\n}\r\n\r\nfunction* userWorker({ payload : id })\r\n{\r\n  try\r\n  {\r\n    let data = yield call(requestUser, id)\r\n    if(!data)\r\n      data = yield call(registerUser, id)\r\n    yield put(userSuccess(data))\r\n  }\r\n  catch(err)\r\n  {\r\n    yield put(userError())\r\n  }\r\n}\r\n\r\nfunction registerUser(id)\r\n{\r\n  const opts = {\r\n    method : 'POST',\r\n    headers : {'Content-Type': 'application/json;charset=utf-8'}\r\n  }\r\n  return fetch(API_RESOLVER.userReq(id), opts).then(res => res.json())\r\n}\r\n\r\nfunction requestUser(id)\r\n{\r\n\r\n  return fetch(API_RESOLVER.userReq(id)).then(res => res.json())\r\n}\r\n\r\n\r\nexport function* userGroupAddWatcher()\r\n{\r\n  yield takeEvery(USER_GROUP_ADD, userGroupAddWorker)\r\n}\r\n\r\nfunction* userGroupAddWorker({ payload : {uid, group} })\r\n{\r\n  try\r\n  {\r\n    let data = yield call(userGroupAdd, uid, group)\r\n    yield put(userGroupAddSuccess(data))\r\n  }\r\n  catch(err)\r\n  {\r\n    yield put(userGroupAddError())\r\n  }\r\n}\r\n\r\nfunction userGroupAdd(uid, group)\r\n{\r\n  const opts = {\r\n    method : 'PUT',\r\n    headers : {'Content-Type': 'application/json;charset=utf-8'},\r\n    body : JSON.stringify({uid, group})\r\n  }\r\n  return fetch(API_RESOLVER.userGroupToggle(), opts).then(res => res.json())\r\n}\r\n\r\n\r\nexport function* userGroupDelWatcher()\r\n{\r\n  yield takeEvery(USER_GROUP_DEL, userGroupDelWorker)\r\n}\r\n\r\nfunction* userGroupDelWorker({ payload : uid })\r\n{\r\n  try\r\n  {\r\n    let data = yield call(userGroupDel, uid)\r\n    yield put(userGroupDelSuccess(data))\r\n  }\r\n  catch(err)\r\n  {\r\n    yield put(userGroupDelError())\r\n  }\r\n}\r\n\r\nfunction userGroupDel(uid)\r\n{\r\n  const opts = {\r\n    method : 'DELETE',\r\n    headers : {'Content-Type': 'application/json;charset=utf-8'},\r\n    body : JSON.stringify({uid})\r\n  }\r\n  return fetch(API_RESOLVER.userGroupToggle(), opts).then(res => res.json())\r\n}","import { createStore, applyMiddleware } from \"redux\"\r\nimport { composeWithDevTools } from 'redux-devtools-extension'\r\nimport createSagaMiddleware from 'redux-saga'\r\n\r\nimport rootReducer from \"./reducers/rootReducer\"\r\nimport { searchWatcher } from \"./sagas/search\"\r\nimport { scheduleWatcher } from \"./sagas/schedule\"\r\nimport { userWatcher, userGroupAddWatcher, userGroupDelWatcher } from \"./sagas/user\"\r\n\r\nconst sagaMiddleware = createSagaMiddleware()\r\n\r\nconst store = createStore(\r\n  rootReducer,\r\n  composeWithDevTools(\r\n    applyMiddleware(sagaMiddleware)\r\n  )\r\n)\r\n\r\nsagaMiddleware.run(searchWatcher)\r\nsagaMiddleware.run(scheduleWatcher)\r\nsagaMiddleware.run(userWatcher)\r\nsagaMiddleware.run(userGroupAddWatcher)\r\nsagaMiddleware.run(userGroupDelWatcher)\r\n\r\nexport default store","import \"core-js/features/map\"\nimport \"core-js/features/set\"\nimport React from \"react\"\nimport ReactDOM from \"react-dom\"\n\nimport bridge from \"@vkontakte/vk-bridge\"\n\nimport App from \"./App\"\n\nimport { Provider } from \"react-redux\"\nimport store from \"./redux/store\"\n\n// Init VK Mini App\nbridge.send(\"VKWebAppInit\")\n\nconst app = (\n  <Provider store={store}>\n    <App />\n  </Provider>\n)\nconst root = document.getElementById(\"root\")\n\nReactDOM.render(app, root)"],"sourceRoot":""}